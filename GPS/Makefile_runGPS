# 📁 기본 설정
CXX = g++
CXXFLAGS = -std=c++17 -Wall -O2
LDFLAGS = -lm -lpython3.11   # Python 연동 필요한 경우 수정
TARGET = gps_runner

# 📦 소스/헤더 파일 구성
SRCS = runGPS.cpp GPS_parse.cpp IMU_parse.cpp logger.cpp cal_distance.cpp
OBJS = $(SRCS:.cpp=.o)
DEPS = GPS_parse.h IMU_parse.h logger.h cal_distance.h

# 🏗️ 기본 빌드 규칙
all: $(TARGET)

$(TARGET): $(OBJS)
	$(CXX) $(CXXFLAGS) -o $@ $^ $(LDFLAGS)

%.o: %.cpp $(DEPS)
	$(CXX) $(CXXFLAGS) -c $<

# 🧹 정리 명령
clean:
	rm -f $(OBJS) $(TARGET)

# 🧪 테스트 실행
run: $(TARGET)
	./$(TARGET)
